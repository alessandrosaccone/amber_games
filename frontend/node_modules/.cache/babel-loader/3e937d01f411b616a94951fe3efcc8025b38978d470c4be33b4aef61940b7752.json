{"ast":null,"code":"import _objectSpread from\"D:/amber_games/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import API_BASE_URL from'../config';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Leaderboard(){const navigate=useNavigate();const[scores,setScores]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{loadLeaderboard();},[]);const loadLeaderboard=async()=>{try{const response=await axios.get(\"\".concat(API_BASE_URL,\"/api/leaderboard\"));setScores(response.data);}catch(error){console.error('Errore nel caricamento della classifica:',error);}finally{setLoading(false);}};// Funzione per calcolare i ranghi con gestione pareggi (Standard Competition Ranking)\nconst getRankedScores=data=>{let currentRank=1;return data.map((score,index)=>{if(index>0&&score.total_points<data[index-1].total_points){currentRank=index+1;}return _objectSpread(_objectSpread({},score),{},{rank:currentRank});});};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Caricamento classifica\"})});}const rankedScores=getRankedScores(scores);const topThree=rankedScores.slice(0,3);const rest=rankedScores.slice(3);return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Classifica\"}),/*#__PURE__*/_jsx(\"p\",{className:\"subtitle\",children:\"I migliori giocatori in classifica\"}),topThree.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"podium\",children:[topThree[1]&&/*#__PURE__*/_jsxs(\"div\",{className:\"podium-place\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"podium-position second\",children:[topThree[1].rank,\"\\xB0\"]}),topThree[1].avatar_url&&/*#__PURE__*/_jsx(\"img\",{src:topThree[1].avatar_url,alt:topThree[1].user_name,className:\"avatar-podium\",style:{width:'80px',height:'80px',margin:'5px auto',display:'block',borderRadius:'50%',objectFit:'contain'}}),/*#__PURE__*/_jsx(\"div\",{className:\"podium-name\",children:topThree[1].user_name}),/*#__PURE__*/_jsxs(\"div\",{className:\"podium-points\",children:[topThree[1].total_points,\" pt\"]})]}),topThree[0]&&/*#__PURE__*/_jsxs(\"div\",{className:\"podium-place\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"podium-position first\",children:[topThree[0].rank,\"\\xB0\"]}),topThree[0].avatar_url&&/*#__PURE__*/_jsx(\"img\",{src:topThree[0].avatar_url,alt:topThree[0].user_name,className:\"avatar-podium\",style:{width:'100px',height:'100px',margin:'5px auto',display:'block',borderRadius:'50%',objectFit:'contain'}}),/*#__PURE__*/_jsx(\"div\",{className:\"podium-name\",children:topThree[0].user_name}),/*#__PURE__*/_jsxs(\"div\",{className:\"podium-points\",children:[topThree[0].total_points,\" pt\"]})]}),topThree[2]&&/*#__PURE__*/_jsxs(\"div\",{className:\"podium-place\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"podium-position third\",children:[topThree[2].rank,\"\\xB0\"]}),topThree[2].avatar_url&&/*#__PURE__*/_jsx(\"img\",{src:topThree[2].avatar_url,alt:topThree[2].user_name,className:\"avatar-podium\",style:{width:'80px',height:'80px',margin:'5px auto',display:'block',borderRadius:'50%',objectFit:'contain'}}),/*#__PURE__*/_jsx(\"div\",{className:\"podium-name\",children:topThree[2].user_name}),/*#__PURE__*/_jsxs(\"div\",{className:\"podium-points\",children:[topThree[2].total_points,\" pt\"]})]})]}),rest.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"leaderboard-list\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Tutta la classifica\"}),rest.map(score=>/*#__PURE__*/_jsxs(\"div\",{className:\"leaderboard-item\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"leaderboard-rank\",children:[score.rank,\"\\xB0\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"leaderboard-user-info\",style:{display:'flex',alignItems:'center',gap:'10px',flex:1},children:[score.avatar_url&&/*#__PURE__*/_jsx(\"img\",{src:score.avatar_url,alt:score.user_name,className:\"avatar-list\",style:{width:'60px',height:'60px',borderRadius:'50%',objectFit:'contain'}}),/*#__PURE__*/_jsx(\"span\",{className:\"leaderboard-name\",children:score.user_name})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"leaderboard-points\",children:[score.total_points,\" pt\"]})]},score.id))]}),scores.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-info\",children:\"Nessun punteggio disponibile\"}),/*#__PURE__*/_jsx(\"div\",{className:\"button-group mt-20\",children:/*#__PURE__*/_jsx(\"button\",{className:\"secondary\",onClick:()=>navigate('/'),children:\"Torna alla home\"})})]});}export default Leaderboard;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","axios","API_BASE_URL","jsx","_jsx","jsxs","_jsxs","Leaderboard","navigate","scores","setScores","loading","setLoading","loadLeaderboard","response","get","concat","data","error","console","getRankedScores","currentRank","map","score","index","total_points","_objectSpread","rank","className","children","rankedScores","topThree","slice","rest","length","avatar_url","src","alt","user_name","style","width","height","margin","display","borderRadius","objectFit","alignItems","gap","flex","id","onClick"],"sources":["D:/amber_games/frontend/src/components/Leaderboard.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport API_BASE_URL from '../config';\r\n\r\nfunction Leaderboard() {\r\n  const navigate = useNavigate();\r\n  const [scores, setScores] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    loadLeaderboard();\r\n  }, []);\r\n\r\n  const loadLeaderboard = async () => {\r\n    try {\r\n      const response = await axios.get(`${API_BASE_URL}/api/leaderboard`);\r\n      setScores(response.data);\r\n    } catch (error) {\r\n      console.error('Errore nel caricamento della classifica:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Funzione per calcolare i ranghi con gestione pareggi (Standard Competition Ranking)\r\n  const getRankedScores = (data) => {\r\n    let currentRank = 1;\r\n    return data.map((score, index) => {\r\n      if (index > 0 && score.total_points < data[index - 1].total_points) {\r\n        currentRank = index + 1;\r\n      }\r\n      return { ...score, rank: currentRank };\r\n    });\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"container\">\r\n        <div className=\"loading\">Caricamento classifica</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const rankedScores = getRankedScores(scores);\r\n  const topThree = rankedScores.slice(0, 3);\r\n  const rest = rankedScores.slice(3);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h1>Classifica</h1>\r\n      <p className=\"subtitle\">I migliori giocatori in classifica</p>\r\n\r\n      {topThree.length > 0 && (\r\n        <div className=\"podium\">\r\n          {/* Secondo Posto */}\r\n          {topThree[1] && (\r\n            <div className=\"podium-place\">\r\n              <div className=\"podium-position second\">\r\n                {topThree[1].rank}째\r\n              </div>\r\n              {topThree[1].avatar_url && <img src={topThree[1].avatar_url} alt={topThree[1].user_name} className=\"avatar-podium\" style={{ width: '80px', height: '80px', margin: '5px auto', display: 'block', borderRadius: '50%', objectFit: 'contain' }} />}\r\n              <div className=\"podium-name\">{topThree[1].user_name}</div>\r\n              <div className=\"podium-points\">{topThree[1].total_points} pt</div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Primo Posto */}\r\n          {topThree[0] && (\r\n            <div className=\"podium-place\">\r\n              <div className=\"podium-position first\">\r\n                {topThree[0].rank}째\r\n              </div>\r\n              {topThree[0].avatar_url && <img src={topThree[0].avatar_url} alt={topThree[0].user_name} className=\"avatar-podium\" style={{ width: '100px', height: '100px', margin: '5px auto', display: 'block', borderRadius: '50%', objectFit: 'contain' }} />}\r\n              <div className=\"podium-name\">{topThree[0].user_name}</div>\r\n              <div className=\"podium-points\">{topThree[0].total_points} pt</div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Terzo Posto */}\r\n          {topThree[2] && (\r\n            <div className=\"podium-place\">\r\n              <div className=\"podium-position third\">\r\n                {topThree[2].rank}째\r\n              </div>\r\n              {topThree[2].avatar_url && <img src={topThree[2].avatar_url} alt={topThree[2].user_name} className=\"avatar-podium\" style={{ width: '80px', height: '80px', margin: '5px auto', display: 'block', borderRadius: '50%', objectFit: 'contain' }} />}\r\n              <div className=\"podium-name\">{topThree[2].user_name}</div>\r\n              <div className=\"podium-points\">{topThree[2].total_points} pt</div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {rest.length > 0 && (\r\n        <div className=\"leaderboard-list\">\r\n          <h2>Tutta la classifica</h2>\r\n          {rest.map((score) => (\r\n            <div key={score.id} className=\"leaderboard-item\">\r\n              <span className=\"leaderboard-rank\">{score.rank}째</span>\r\n              <div className=\"leaderboard-user-info\" style={{ display: 'flex', alignItems: 'center', gap: '10px', flex: 1 }}>\r\n                {score.avatar_url && <img src={score.avatar_url} alt={score.user_name} className=\"avatar-list\" style={{ width: '60px', height: '60px', borderRadius: '50%', objectFit: 'contain' }} />}\r\n                <span className=\"leaderboard-name\">{score.user_name}</span>\r\n              </div>\r\n              <span className=\"leaderboard-points\">{score.total_points} pt</span>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {scores.length === 0 && (\r\n        <div className=\"alert alert-info\">\r\n          Nessun punteggio disponibile\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"button-group mt-20\">\r\n        <button className=\"secondary\" onClick={() => navigate('/')}>\r\n          Torna alla home\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Leaderboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}